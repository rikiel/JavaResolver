
\begin{lstlisting}[caption={Example of loading data from Oracle database using JDBC API}, label={code:jdbc}]
public DatabaseValue getForId(int id) throws SQLException {
 final OracleDataSource dataSource = new OracleDataSource(); /*\label{code:jdbc:dataSource:begin}*/
  dataSource.setURL("jdbc:oracle:thin:@//192.168.0.16:1521/orcl");
  dataSource.setUser("User");
  dataSource.setPassword("Password"); /*\label{code:jdbc:dataSource:end}*/

  Connection connection = null;
  try {
    connection = dataSource.getConnection();
    PreparedStatement preparedStatement = null;
    try {
      String query = "SELECT ID, VALUE FROM T WHERE ID = ?";
      preparedStatement = connection.prepareStatement(query); /*\label{code:jdbc:prepareStatement:begin}*/
      preparedStatement.setInt(1, id); /*\label{code:jdbc:prepareStatement:end}*/
      ResultSet resultSet = null;
      try {
        resultSet = preparedStatement.executeQuery(); /*\label{code:jdbc:executeQuery}*/
        DatabaseValue databaseValue = new DatabaseValue();
        databaseValue.setId(resultSet.getInt(1));
        databaseValue.setValue(resultSet.getString(2));
        return databaseValue; /*\label{code:jdbc:return}*/
      } catch (SQLException e) {
        // handle exception
      } finally {
        if (resultSet != null) {
          resultSet.close();
        }
      }
    } catch (SQLException e) {
      // handle exception
    } finally {
      if (preparedStatement != null) {
        preparedStatement.close();
      }
    }
  } catch (SQLException e) {
    // handle exception
  } finally {
    if (connection != null) {
      connection.close();
    }
  }
}
\end{lstlisting}
