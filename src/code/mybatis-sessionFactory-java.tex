
\begin{lstlisting}[language=Java, caption={Configuration of \Code{SqlSessionFactory} in Java}, label={code:mybatis:sessionFactory:java}]
public SqlSessionFactory createSqlSessionFactory() throws SQLException {
  Environment environment = new Environment.Builder("environmentId")
      .dataSource(createDataSource()) /*\label{code:mybatis:sessionFactory:java:dataSource}*/
      .transactionFactory(new JdbcTransactionFactory())
      .build();
  Configuration sessionFactory = new Configuration(environment);
  sessionFactory.addMapper(Mapper.class); /*\label{code:mybatis:sessionFactory:java:addMapper}*/
  return new SqlSessionFactoryBuilder()
      .build(sessionFactory); /*\label{code:mybatis:sessionFactory:java:sessionFactory}*/
}
\end{lstlisting}
